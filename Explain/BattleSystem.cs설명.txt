BattleSystem.cs
스테이지 변수 선언 및 할당(기본값 1)
랜덤, 적 리스트, 보스리스트 참조형 생성
나타난 적을 저장할 리스트 생성
전투전 체력 저장할 정수 선언
패배를 구분할 불값 선언

Encounting함수(캐릭터 클래스 매개변수를 받는다)
전투전 체력을 저장
패배 불값을 false로 초기화
나타난 적들 리스트를 초기화
스테이지에 따라 나타날 적 수의 최소치를 정하는 정수(최대는 4로 고정)
적의 최소치~최대치(5)마리로 랜덤하게 결정
스테이지가 10의 배수일 경우
-나타난 적을 모두 지우고
-보스를 추가
아니면
-적리스트에서 불러올 순서 랜덤지정
-랜덤지정된 적 정보 가져오기
-나타난 적 리스트에 해당 적의 정보 저장
Battle함수에 받아온 캐릭터 클래스 매개변수를 넣고 호출

Battle함수
전투시 항상 돌아와서 반복되는 함수로
적이 모두 죽었는지 확인하고 승리결과 Result함수 호출
방어보너스 실수와 은신 불값을 반환하는 ShowEnemies함수에 받아온 매개변수를 넣고 호출
ShowEnemies가 끝나면
EnemyAttack함수에 나타난 적리스트, 받아온 매개변수, 반환된blockBonus, 반환된 hidden을 매개변수로 호출
EnemtAttack이 끝나면 패배했는지 확인하고 패배했다면 전투 종료

ShowEnemies함수
적들의 수만큼 적들의 정보를 표시하고
플레이어 정보를 표시하고
값을 입력받는다.
1번 = SelectTarget호출, 1,false반환
2번 = blockBonus와 hidden, 불값 cancel을 반환받는 UseSkill호출
cancel이 true로 반환되면 반복
반환받은 blockBonus, hidden반환
나머지 = 반복

UseSkill함수
플레이어의 직업에 따라 스킬 문자열을 2개 받아옴
스킬을 표시하고 값을 입력받음
0번 = 1,false,true를 반환
1,2,0을 제외한 다른값 = 반복
위 조건과 맞는게 없을 시
플레이어의 직업에 따라
-전사일 때
--1번 = SelectTarget함수에 플레이어, 2, canDodge: false를 매개변수로 호출
--2번 = SelectTarget함수에 플레이어를 매개변수로 호출, SelectTarget이 끝나면 2,false,false반환
-마법사일 때
--1번 = SelectTarget함수에 플레이어, 1.5f, canDodge: false를 매개변수로 호출
--2번 =
2~4회 공격을 랜덤으로 지정
랜덤한 적에게 횟수만큼 데미지를 입힘
-도적일 때
--1번 = SelectTarget에 플레이어, 3을 매개변수로 호출
--2번 = SelectTarget에 플레이어를 매개변수로 호출, 1,ture,false를 반환

SelectTarget함수 (캐릭터 클래스 플레이어, 실수 attackBonus = 기본값 1, 불값 canDodge = 기본값 true)
적정보 표시
내정보 표시
값을 입력받음.
0번 = 행동 취소 후 반환
나머지 =
적의 번호와 일치시
-선택한 적이 이미 죽어있다면
--반복
-아니면
--PlayerAttack함수에 선택,플레이어,공격보너스,회피가능여부를 매개변수로 호출 후 반환
적의 번호와 불일치시
-반복
숫자가 아님 = 잘못된 입력 출력 후 반복

PlayerAttack함수(정수, 캐릭터, 실수, 불값 매개변수)
받아온 매개변수-1에 해당하는 적을 가져와서
플레이어 총 공격력 * 공격보너스를 정수로 변환해 저장
15%로 치명타
치명타시 기존 데미지의1.6배 정수 변환
명중 초기화
회피가능일시
-90%확률로 명중
-10%로 명중 실패시 데미지 = 0

적 체력 - 데미지
적 체력이 0이하일 시 적 죽음처리

매세지 출력

EnemyAttack함수(적리스트,캐릭터,방어보너스,은신)
적이 다 죽은 상태면 반환
기존 체력 저장
등장 적 만큼 반복
-죽은 적일 경우 넘어감
-데미지 = 적 공격력/방어보너스의 정수 변환
-치명타,명중,방어 초기화
-은신상태가 아닐경우
--15%치명타
--90%명중

--명중 및 플레이어 총 방어력 - 적 공격력이 0보다 클 때
---그 차이가 100이상일 시 반드시 방어 성공
---아니면 (총방어력-적공격력)~100 랜덤으로 뽑아 50보다 클 때 방어 성공

--방어성공시
---데미지/2

--플레이어 데미지 처리

적 공격 결과 표시
플레이어의 체력이 0이하일 경우 = 패배결과Result함수로 호출
적 중에 보스몹이 있을 때 = 보스몹 스킬 사용

Result함수(플레이어, 결과모드열거형)
퀘스트 매니저의 있는 퀘스트 만큼 반복
-퀘스트가 클리어 상태거나 수주하지 않았으면 넘어감
-퀘스트의 종류에 따라
--처치 퀘스트 일 때
---나타난 적들 만큼 반복
----적이 목표이고 쓰러뜨렸을 때
-----처치 횟수올리고
-----처치횟수가 요구횟수 이상일때 = 퀘스트 클리어

--층 도달 퀘스트일때
---현재 스테이지가 기존 도달 스테이지보다 높을 때 = 현 스테이지를 도달 스테이지로
---도달 스테이지가 요구 스테이지이상일 때 = 퀘스트 클리어

받은 열거형 값이 승리일때 = BattleWin호출
아니면 BattleLose호출

BattleWin함수
최대체력의 10분의 1 값 회복
기존 경험치 저장
스테이지*500 + 나타난적 * 100 만큼 골드 보상
회복처리
회복했을때 최대체력 넘으면 최대체력으로 조정
적의 레벨만큼 경험치 추가
돈 추가처리
스테이지++

메세지 출력
퀘스트 클리어시 클리어한 퀘스트 출력

값을 입력받는다.
0이외에 반복
0번 =
경험치가 요구 경험치 이상이면
요구경험치 만큼 차감하고
레벨업
최대체력 5분의 1 만큼 회복
회복처리
회복했을때 최대체력 넘으면 최대체력으로 조정
레벨업으로 변화된 값 표시

BattleLose함수
패배 불값 true로 변경
마지막 능력치 저장
현재 hp저장
레벨*500만큼 골드 지급
레벨=1
경험치=0
골드지급처리
스테이지=1
직업별 능력치 초기치 설정

패배메세지 출력
달성 퀘스트 출력

값 받아와서 0 아니면 반복
0이면 최종능력치, 레벨1로 돌아간 능력치, 보상 출력 후 반환
